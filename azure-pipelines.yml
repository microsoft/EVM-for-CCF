# https://aka.ms/yaml

trigger:
  batch: true
  branches:
    include:
      - "master"

pr:
  autoCancel: true
  branches:
    include:
      - master

pool:
  name: Ubuntu-1804-DC4s
  vmImage: ccfciteam/ccf-ci-18.04-oe-0.7.0-sgx:latest

steps:
- script: mkdir build
  displayName: 'Create build directory'

- script: cmake .. -GNinja
  displayName: CMake
  workingDirectory: build

- script: ninja
  displayName: Build
  workingDirectory: build

- script: ./tests.sh -VV
  displayName: Tests
  workingDirectory: build
